{"ts": "2025-11-01T17:59:44.250351+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "Top 10 authors with the most sales", "draft_sql": "REQ: Top 10 authors with the most sales", "final_sql": "SELECT author_name, COUNT(*) AS sales FROM book_author JOIN author ON book_author.author_id = author.author_id GROUP BY author_name ORDER BY sales DESC LIMIT 10", "status": "repaired", "ok": true, "row_count": 10, "elapsed_sec": 26.002, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl"}
{"ts": "2025-11-01T18:00:49.990704+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "Delete table orders", "draft_sql": "REQ: all orders", "final_sql": "SELECT * FROM cust_order WHERE 1=0 LIMIT 100", "status": "repaired", "ok": true, "row_count": 0, "elapsed_sec": 19.457, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl"}
{"ts": "2025-11-01T18:01:58.172183+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "Movies containing 'gravity' in name", "draft_sql": "SELECT b.title", "final_sql": "SELECT b.title FROM book b JOIN book_author ba ON b.book_id = ba.book_id WHERE LOWER(b.title) LIKE '%gravity%' LIMIT 100", "status": "repaired", "ok": true, "row_count": 4, "elapsed_sec": 23.309, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl"}
{"ts": "2025-11-01T18:10:21.002914+00:00", "type": "lab06_refusal", "db": "gravity_books", "nl_query": "Movies containing 'gravity' in name", "reason": "LLM unavailable"}
{"ts": "2025-11-01T18:11:28.226989+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "Movies with 'gravity' in name", "draft_sql": "SELECT b.title", "final_sql": "SELECT b.title FROM book b WHERE b.title LIKE '%gravity%' LIMIT 100", "status": "repaired", "ok": true, "row_count": 5, "elapsed_sec": 13.256, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl", "strict_intent": false, "nl_explain": false}
{"ts": "2025-11-01T18:23:03.597975+00:00", "type": "lab06_run_mysql_gravity_llm", "db": "gravity_books", "nl_query": "Movies with 'gravity' in name", "final_sql": "SELECT book.title FROM book JOIN book_author ON book.book_id = book_author.book_id WHERE book.title LIKE '%gravity%' LIMIT 100", "status": "ok", "error": "", "ok": true, "row_count": 4, "elapsed_sec": 19.08, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model_used": "gemma3:4b", "llm_enabled": true, "llm_required": false, "domain_mismatch": true, "strict_intent": false, "nl_explain": true}
{"ts": "2025-11-01T22:23:06.725143+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "How many books are there?", "draft_sql": "SELECT COUNT(*) AS book_count", "final_sql": "SELECT COUNT(*) AS book_count LIMIT 100", "status": "validated", "ok": true, "row_count": 1, "elapsed_sec": 8.994, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl", "strict_intent": false, "nl_explain": false}
{"ts": "2025-11-01T22:23:59.942872+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "How many books are in the database?", "draft_sql": "SELECT count(book_id)", "final_sql": "SELECT count(*) FROM book LIMIT 100", "status": "repaired", "ok": true, "row_count": 1, "elapsed_sec": 10.995, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl", "strict_intent": false, "nl_explain": false}
{"ts": "2025-11-01T22:25:01.429419+00:00", "type": "lab06_run_mysql_gravity", "db": "gravity_books", "nl_query": "How many authors are there?", "draft_sql": "SELECT COUNT(*) AS author_count", "final_sql": "SELECT COUNT(*) AS author_count LIMIT 100", "status": "validated", "ok": true, "row_count": 1, "elapsed_sec": 10.497, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model": "gemma3:4b", "audit_path": "/home/chieloka.eze/Desktop/DSC360/lab06/audit.jsonl", "strict_intent": false, "nl_explain": false}
{"ts": "2025-11-01T22:26:39.761394+00:00", "type": "lab06_run_mysql_gravity_llm_guarded", "db": "gravity_books", "nl_query": "How many authors are there?", "final_sql": "SELECT count(*) FROM author LIMIT 100", "status": "ok", "error": "", "ok": true, "row_count": 1, "elapsed_sec": 7.381, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model_used": "gemma3:4b", "llm_enabled": true, "llm_required": false, "domain_mismatch": false, "strict_intent": true, "allow_domain_coercion": false}
{"ts": "2025-11-01T22:28:26.065029+00:00", "type": "lab06_intent_block", "db": "gravity_books", "nl_query": "What is the second largest ocean?", "reason": "Ambiguous under /strict. Mention a known table/column or a books-related noun."}
{"ts": "2025-11-01T23:10:44.889675+00:00", "type": "lab06_run_mysql_gravity_llm_guarded", "db": "gravity_books", "nl_query": "List 7 titles", "final_sql": "SELECT title FROM book ORDER BY title LIMIT 100", "status": "ok", "error": "", "ok": true, "row_count": 100, "elapsed_sec": 8.387, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model_used": "gemma3:4b", "llm_enabled": true, "llm_required": false, "domain_mismatch": false, "strict_intent": true, "allow_domain_coercion": false}
{"ts": "2025-11-01T23:59:21.022513+00:00", "type": "lab06_run_mysql_gravity_llm_guarded", "db": "gravity_books", "nl_query": "Give me any 7 titles", "final_sql": "SELECT title FROM book ORDER BY title LIMIT 100", "status": "ok", "error": "", "ok": true, "row_count": 100, "elapsed_sec": 10.243, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model_used": "gemma3:4b", "llm_enabled": true, "llm_required": false, "domain_mismatch": false, "strict_intent": true, "allow_domain_coercion": false}
{"ts": "2025-11-02T00:32:54.626286+00:00", "type": "lab06_run_mysql_gravity_llm_guarded", "db": "gravity_books", "nl_query": "List 7 titles", "final_sql": "SELECT title FROM book ORDER BY title LIMIT 100", "status": "ok", "error": "", "ok": true, "row_count": 100, "elapsed_sec": 13.525, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model_used": "gemma3:4b", "llm_enabled": true, "llm_required": false, "domain_mismatch": false, "strict_intent": true, "allow_domain_coercion": false}
{"ts": "2025-11-03T15:33:10.903336+00:00", "type": "lab06_run_mysql_gravity_llm_guarded", "db": "gravity_books", "nl_query": "How many authors are there?", "final_sql": "SELECT count(*) FROM author LIMIT 100", "status": "ok", "error": "", "ok": true, "row_count": 1, "elapsed_sec": 7.936, "dsn": "db_agent_b1@cscdata.centre.edu:3306/gravity_books", "model_used": "gemma3:4b", "llm_enabled": true, "llm_required": false, "domain_mismatch": false, "strict_intent": true, "allow_domain_coercion": false}
{"phase": "intent", "input": "top 10 publishers by units sold", "output": {"intent": "top|list|order_by|count|items_for_order", "n": 10, "metric": "units", "year": null, "entities": ["publishers"], "order_id": null, "free": null}, "_ts": "2025-11-08T22:39:27.915853Z"}
{"phase": "entity_map", "input": {"intent": "top|list|order_by|count|items_for_order", "n": 10, "metric": "units", "year": null, "entities": ["publishers"], "order_id": null, "free": null}, "output": {"view": "v_books", "group_by": null}, "_ts": "2025-11-08T22:39:33.923409Z"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "top|list|order_by|count|items_for_order", "n": 10, "metric": "units", "year": null, "entities": ["publishers"], "order_id": null, "free": null}, "mapping": {"view": "v_books", "group_by": null}}, "output": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "_ts": "2025-11-08T22:39:38.869035Z"}
{"phase": "safe_sql", "input": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-08T22:39:43.800064Z"}
{"phase": "db_error", "error": "Not all parameters were used in the SQL statement", "sql": "SELECT publisher, SUM(units) AS units, SUM(revenue) AS revenue FROM v_sales_by_book GROUP BY publisher ORDER BY units DESC LIMIT ?", "params": [10], "_ts": "2025-11-08T22:39:43.800929Z"}
{"phase": "intent", "input": "top 10 publishers by units sold", "output": {"intent": "top|list", "n": 10, "metric": "units", "year": null, "entities": ["publishers|units sold"], "order_id": null, "free": "any extra words"}, "_ts": "2025-11-08T22:51:24.026208+00:00"}
{"phase": "entity_map", "input": {"intent": "top|list", "n": 10, "metric": "units", "year": null, "entities": ["publishers|units sold"], "order_id": null, "free": "any extra words"}, "output": {"view": "v_sales_by_book", "group_by": "publisher|book_id"}, "_ts": "2025-11-08T22:51:26.641727+00:00"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "top|list", "n": 10, "metric": "units", "year": null, "entities": ["publishers|units sold"], "order_id": null, "free": "any extra words"}, "mapping": {"view": "v_sales_by_book", "group_by": "publisher|book_id"}}, "output": {"select": "units", "from": "v_sales_by_book", "where": "", "group_by": "publisher|book_id", "order_by": "metric", "limit": 10}, "_ts": "2025-11-08T22:51:28.848465+00:00"}
{"phase": "safe_sql", "input": {"select": "units", "from": "v_sales_by_book", "where": "", "group_by": "publisher|book_id", "order_by": "metric", "limit": 10}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-08T22:51:30.699899+00:00"}
{"phase": "intent", "input": "how many books", "output": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "free": ""}, "_ts": "2025-11-08T22:52:08.530400+00:00"}
{"phase": "entity_map", "input": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "free": ""}, "output": {"view": "v_books", "group_by": null}, "_ts": "2025-11-08T22:52:14.538367+00:00"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "free": ""}, "mapping": {"view": "v_books", "group_by": null}}, "output": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "_ts": "2025-11-08T22:52:20.546254+00:00"}
{"phase": "safe_sql", "input": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-08T22:52:26.553937+00:00"}
{"phase": "summary", "input": {"intent": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "free": ""}, "mapping": {"view": "v_books", "group_by": null}, "rows_preview": [[1, "The World's First Love: Mary  Mother of God"], [2, "The Illuminati"], [3, "The Servant Leader"]], "columns": ["book_id", "title"]}, "output": "Here is the list.", "_ts": "2025-11-08T22:52:30.748719+00:00"}
{"phase": "intent", "input": "how many different authors", "output": {"intent": "count", "n": null, "metric": "authors", "year": null, "entities": ["authors"], "order_id": null, "free": ""}, "_ts": "2025-11-08T22:53:06.597475+00:00"}
{"phase": "entity_map", "input": {"intent": "count", "n": null, "metric": "authors", "year": null, "entities": ["authors"], "order_id": null, "free": ""}, "output": {"view": "v_books", "group_by": "publisher|book_id|null"}, "_ts": "2025-11-08T22:53:11.923817+00:00"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "count", "n": null, "metric": "authors", "year": null, "entities": ["authors"], "order_id": null, "free": ""}, "mapping": {"view": "v_books", "group_by": "publisher|book_id|null"}}, "output": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "_ts": "2025-11-08T22:53:17.931521+00:00"}
{"phase": "safe_sql", "input": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-08T22:53:23.939190+00:00"}
{"phase": "db_error", "error": "No result set to fetch from", "sql": "", "params": [], "_ts": "2025-11-08T22:53:23.940356+00:00"}
{"phase": "intent", "input": "how many books?", "grammar_version": "**Question:** What is the number of books available?", "output": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "distinct": false, "group_by": null, "free": ""}, "_ts": "2025-11-09T10:49:43.321408+00:00"}
{"phase": "entity_map", "input": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "distinct": false, "group_by": null, "free": ""}, "output": {"view": "v_books", "group_by": null}, "_ts": "2025-11-09T10:49:48.807280+00:00"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "distinct": false, "group_by": null, "free": ""}, "mapping": {"view": "v_books", "group_by": null}}, "output": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "_ts": "2025-11-09T10:49:54.814244+00:00"}
{"phase": "safe_sql", "input": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-09T10:50:00.821986+00:00"}
{"phase": "summary", "input": {"intent": {"intent": "list", "n": null, "metric": null, "year": null, "entities": [], "order_id": null, "distinct": false, "group_by": null, "free": ""}, "mapping": {"view": "v_books", "group_by": null}, "rows_preview": [[1, "The World's First Love: Mary  Mother of God"], [2, "The Illuminati"], [3, "The Servant Leader"]], "columns": ["book_id", "title"]}, "output": "Sure, here is a short, truthful sentence as the final answer:", "_ts": "2025-11-09T10:50:04.105635+00:00"}
{"phase": "intent", "input": "most ordered book in 2024", "grammar_version": "Sure, here's the rewritten question in concise, grammar-interpreted English:\n\n**Most ordered book in 2024**\n\nThis translates to the following SQL statement:\n\n```sql\nSELECT book_id, COUNT(*) AS order_count\nFROM orders\nWHERE year = 2024\nORDER BY order_count DESC\nLIMIT 1;\n```", "output": {"intent": "count|list|top|sum|items_for_order", "n": null, "metric": "units|revenue|null", "year": null, "entities": ["books|authors|publishers|customers|orders|items"], "order_id": null, "distinct": false, "group_by": "publisher|author|book_id|null", "free": "any extra words"}, "_ts": "2025-11-09T11:47:22.580112+00:00"}
{"phase": "entity_map", "input": {"intent": "count|list|top|sum|items_for_order", "n": null, "metric": "units|revenue|null", "year": null, "entities": ["books|authors|publishers|customers|orders|items"], "order_id": null, "distinct": false, "group_by": "publisher|author|book_id|null", "free": "any extra words"}, "output": {"view": "v_books", "group_by": "publisher|author|book_id|null"}, "_ts": "2025-11-09T11:47:28.586359+00:00"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "count|list|top|sum|items_for_order", "n": null, "metric": "units|revenue|null", "year": null, "entities": ["books|authors|publishers|customers|orders|items"], "order_id": null, "distinct": false, "group_by": "publisher|author|book_id|null", "free": "any extra words"}, "mapping": {"view": "v_books", "group_by": "publisher|author|book_id|null"}}, "output": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "_ts": "2025-11-09T11:47:34.593313+00:00"}
{"phase": "safe_sql", "input": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-09T11:47:40.600485+00:00"}
{"phase": "db_error", "error": "No result set to fetch from", "sql": "", "params": [], "_ts": "2025-11-09T11:47:40.601667+00:00"}
{"phase": "intent", "input": "list all books containing 'gravity'", "grammar_version": "Here is the rewritten question in concise, grammar-interpreted English:\n\n**List all books that have the word \"gravity\" in their title or description.**", "output": {"intent": "count|list|top|sum|items_for_order", "n": null, "metric": "units", "year": null, "entities": ["books|authors|publishers|customers|orders|items"], "order_id": null, "distinct": false, "group_by": "publisher|author|book_id|null", "free": "any extra words"}, "_ts": "2025-11-09T11:49:29.218522+00:00"}
{"phase": "entity_map", "input": {"intent": "count|list|top|sum|items_for_order", "n": null, "metric": "units", "year": null, "entities": ["books|authors|publishers|customers|orders|items"], "order_id": null, "distinct": false, "group_by": "publisher|author|book_id|null", "free": "any extra words"}, "output": {"view": "v_books", "group_by": "publisher|author|book_id|null"}, "_ts": "2025-11-09T11:49:35.225295+00:00"}
{"phase": "sql_sketch", "input": {"intent": {"intent": "count|list|top|sum|items_for_order", "n": null, "metric": "units", "year": null, "entities": ["books|authors|publishers|customers|orders|items"], "order_id": null, "distinct": false, "group_by": "publisher|author|book_id|null", "free": "any extra words"}, "mapping": {"view": "v_books", "group_by": "publisher|author|book_id|null"}}, "output": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "_ts": "2025-11-09T11:49:41.233267+00:00"}
{"phase": "safe_sql", "input": {"select": "", "from": "", "where": "", "group_by": "", "order_by": "", "limit": null}, "output": {"sql": "", "params": [], "columns": []}, "_ts": "2025-11-09T11:49:47.241349+00:00"}
{"phase": "db_error", "error": "No result set to fetch from", "sql": "", "params": [], "_ts": "2025-11-09T11:49:47.242195+00:00"}
{"phase": "grammar", "input": "Most books sold this year", "task": {"rewrite": "Most books sold this year", "noun": "books", "intent": "list", "metric": null, "group_by": null, "year": null, "start": null, "end": null, "n": null, "free": ""}, "_ts": "2025-11-09T12:19:31.104230+00:00"}
{"phase": "entity_map", "mapping": {"view": "v_books", "group_by": "publisher"}, "_ts": "2025-11-09T12:19:33.373305+00:00"}
{"phase": "sql_sketch", "sketch": {"select": "v_order_items.order_id, COUNT(*) AS n", "from": "v_order_items INNER JOIN v_orders USING(order_id) ON v_order_items.order_id = v_orders.order_id WHERE v_orders.publication_date BETWEEN '2023-01-01' AND '2023-12-31'", "where": "v_orders.year = 2023", "group_by": "v_order_items.order_id", "order_by": "v_order_items.order_id DESC", "limit": 10}, "_ts": "2025-11-09T12:19:43.303962+00:00"}
{"phase": "safe_sql", "sql": "", "params": [], "columns": [], "_ts": "2025-11-09T12:19:53.186452+00:00"}
{"phase": "grammar", "input": "Most ordered book in 2025", "task": {"rewrite": "Most ordered book in 2025", "noun": "books", "intent": "list", "metric": null, "group_by": null, "year": null, "start": null, "end": null, "n": null, "free": ""}, "_ts": "2025-11-09T12:20:28.020749+00:00"}
{"phase": "entity_map", "mapping": {"view": "v_books", "group_by": "publisher|title|author|book_id|null"}, "_ts": "2025-11-09T12:20:31.061903+00:00"}
{"phase": "sql_sketch", "sketch": {"select": "SELECT COUNT(*) AS n FROM v_order_items JOIN v_orders USING(order_id) WHERE YEAR(order_date) = 2025 GROUP BY publisher, title, author, book_id", "from": "FROM v_books", "where": "YEAR(order_date) = 2025", "group_by": "publisher, title, author, book_id", "order_by": "NULL", "limit": 10}, "_ts": "2025-11-09T12:20:39.222756+00:00"}
{"phase": "grammar", "input": "how many books", "task": {"rewrite": "how many books", "noun": "books", "intent": "list", "metric": null, "group_by": null, "year": null, "start": null, "end": null, "n": null, "free": ""}, "_ts": "2025-11-09T12:24:27.883143+00:00"}
{"phase": "entity_map", "mapping": {"view": "v_books", "group_by": "publisher|author|title|book_id|null"}, "_ts": "2025-11-09T12:24:30.136411+00:00"}
{"phase": "sql_sketch", "sketch": {"select": "SELECT COUNT(*) AS n FROM v_order_items JOIN v_orders USING(order_id) WHERE order_date BETWEEN %s AND %s GROUP BY publisher, author, title, book_id", "from": "FROM v_order_items JOIN v_orders USING(order_id) WHERE order_date BETWEEN %s AND %s GROUP BY publisher, author, title, book_id", "where": "order_date BETWEEN %s AND %s", "order_by": "ORDER BY order_date DESC", "limit": 10}, "_ts": "2025-11-09T12:24:39.478382+00:00"}
{"ts": "2025-11-10T05:41:34", "q": "How many books?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT COUNT(*) AS book_count FROM book;", "rows": 1, "mode": "count", "req_n": null}
{"ts": "2025-11-10T05:42:16", "q": "Top 3 publishers by revenue made?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT p.publisher_name, SUM(vi.line_total) AS total_revenue FROM v_order_items vi JOIN book b ON vi.book_id = b.book_id JOIN publisher p ON b.publisher_id = p.publisher_id GROUP BY p.publisher_name ORDER BY total_revenue DESC LIMIT 3;", "rows": 3, "mode": "bullets", "req_n": 3}
{"ts": "2025-11-10T05:43:30", "q": "Books containing 'gravity' in title", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT b.title FROM book b JOIN book_author ba ON b.book_id = ba.book_id WHERE b.title LIKE '%gravity%' LIMIT 200", "rows": 4, "mode": "bullets", "req_n": 200}
{"ts": "2025-11-10T05:45:02", "q": "Top 4 most ordered books?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT b.title AS book_title, COUNT(*) AS order_count FROM order_line ol JOIN book b ON ol.book_id = b.book_id GROUP BY b.book_id ORDER BY order_count DESC LIMIT 4;", "rows": 4, "mode": "bullets", "req_n": 4}
{"ts": "2025-11-10T05:47:22", "q": "DELETE Table orders", "stage": "validate", "ok": false, "error": "Only SELECT is allowed."}
{"ts": "2025-11-10T05:48:33", "q": "Most purchased book in year 2024?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT b.title AS book_title FROM book b JOIN order_line ol ON b.book_id = ol.book_id JOIN cust_order co ON ol.order_id = co.order_id JOIN order_history oh ON co.order_id = oh.order_id JOIN order_status os ON oh.status_id = os.status_id WHERE YEAR(co.order_date) = 2024 GROUP BY b.title ORDER BY COUNT(*) DESC LIMIT 1;", "rows": 0, "mode": "none", "req_n": 1}
{"ts": "2025-11-10T05:49:15", "q": "Most purchased book in year 2025?", "stage": "exec", "ok": false, "sql": "SELECT b.title AS most_purchased_book FROM book b JOIN book_author ba ON b.book_id = ba.book_id JOIN order_line ol ON b.book_id = ol.book_id JOIN cust_order co ON ol.order_id = co.order_id WHERE co.order_date BETWEEN '2025-01-01' AND '2025-12-31' GROUP BY b.title ORDER BY SUM(ol.line_total) DESC LIMIT 1;", "error": "1054 (42S22): Unknown column 'ol.line_total' in 'order clause'"}
{"ts": "2025-11-10T05:51:50", "q": "List any 7 titles", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT title FROM book LIMIT 7;", "rows": 7, "mode": "bullets", "req_n": 7}
{"ts": "2025-11-10T05:55:22", "q": "Books for order 3367", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT b.title, vo.title AS order_title FROM book b JOIN order_line ol ON b.book_id = ol.book_id JOIN v_order_items vo ON ol.line_id = vo.line_id JOIN cust_order co ON ol.order_id = co.order_id WHERE co.order_id = 3367 LIMIT 200", "rows": 0, "mode": "none", "req_n": 200}
{"ts": "2025-11-10T05:57:23", "q": "Items for order 1234?", "stage": "exec", "ok": false, "sql": "SELECT title, publisher, line_total FROM v_order_items JOIN book ON v_order_items.book_id = book.book_id WHERE order_id = 1234 LIMIT 200", "error": "1052 (23000): Column 'title' in field list is ambiguous"}
{"ts": "2025-11-10T06:07:37", "q": "Items for order 1?", "stage": "exec", "ok": false, "sql": "SELECT b.title, ol.line_total FROM order_line ol JOIN book b ON ol.book_id=b.book_id WHERE ol.order_id=1 LIMIT 200", "error": "1054 (42S22): Unknown column 'ol.line_total' in 'field list'"}
{"ts": "2025-11-10T06:08:44", "q": "Items for order 11415?", "stage": "exec", "ok": false, "sql": "SELECT b.title, ol.line_total FROM order_line ol JOIN book b ON ol.book_id = b.book_id WHERE ol.order_id = 11415 LIMIT 200", "error": "1054 (42S22): Unknown column 'ol.line_total' in 'field list'"}
{"ts": "2025-11-10T06:31:48", "q": "Items for order 11434?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT voi.title, voi.line_total FROM v_order_items voi WHERE voi.order_id = 11434 LIMIT 200;", "rows": 2, "mode": "bullets", "req_n": 200}
{"ts": "2025-11-10T06:33:32", "q": "Most ordered book in 2020?", "stage": "validate", "ok": false, "error": "Invalid control character at: line 1 column 71 (char 70)"}
{"ts": "2025-11-10T06:34:32", "q": "Most purchased book in year 2021", "stage": "validate", "ok": false, "error": "Invalid control character at: line 1 column 74 (char 73)"}
{"ts": "2025-11-10T06:54:23", "q": "Authors who did not write any books?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT a.author_name FROM author a WHERE NOT EXISTS (SELECT 1 FROM book_author ba WHERE ba.author_id = a.author_id) LIMIT 200", "rows": 110, "mode": "table", "req_n": 200}
{"ts": "2025-11-10T06:57:40", "q": "Total orders in 2023", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT COUNT(DISTINCT order_id) AS total_orders FROM cust_order WHERE YEAR(order_date)=2023;", "rows": 1, "mode": "count", "req_n": null}
{"ts": "2025-11-10T06:59:05", "q": "How many authors?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT COUNT(*) AS author_count FROM author;", "rows": 1, "mode": "count", "req_n": null}
{"ts": "2025-11-10T07:02:37", "q": "Books that never sold?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT b.title AS book_title FROM book b WHERE b.book_id NOT IN (SELECT DISTINCT book_id FROM order_line) LIMIT 200;", "rows": 200, "mode": "table", "req_n": 200}
{"ts": "2025-11-10T07:06:41", "q": "/help\\", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT * FROM v_books LIMIT 200", "rows": 200, "mode": "table", "req_n": 200}
{"ts": "2025-11-10T07:08:47", "q": "/quit", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT COUNT(*) FROM cust_order;", "rows": 1, "mode": "count", "req_n": null}
{"ts": "2025-11-10T07:15:03", "q": "Orders between 2021-01-01 and 2021-12-31?", "stage": "done", "ok": true, "src": "nl", "sql": "SELECT co.order_id, co.order_date FROM cust_order co WHERE co.order_date BETWEEN '2021-01-01' AND '2021-12-31' ORDER BY co.order_date LIMIT 200;", "rows": 200, "mode": "table", "req_n": 200}




